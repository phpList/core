services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: false

  PhpList\Core\Domain\:
    resource: '../../src/Domain/*/Service/Builder/*'

  # Concrete mail constructors
  PhpList\Core\Domain\Messaging\Service\Constructor\SystemMailContentBuilder: ~
  PhpList\Core\Domain\Messaging\Service\Constructor\CampaignMailContentBuilder: ~

  # Two EmailBuilder services with different constructors injected
  Core.EmailBuilder.system:
    class: PhpList\Core\Domain\Messaging\Service\Builder\SystemEmailBuilder
    arguments:
      $mailConstructor: '@PhpList\Core\Domain\Messaging\Service\Constructor\SystemMailContentBuilder'
      $googleSenderId: '%messaging.google_sender_id%'
      $useAmazonSes: '%messaging.use_amazon_ses%'
      $usePrecedenceHeader: '%messaging.use_precedence_header%'
      $devVersion: '%app.dev_version%'
      $devEmail: '%app.dev_email%'

  Core.EmailBuilder.campaign:
    class: PhpList\Core\Domain\Messaging\Service\Builder\EmailBuilder
    arguments:
      $mailConstructor: '@PhpList\Core\Domain\Messaging\Service\Constructor\CampaignMailContentBuilder'
      $googleSenderId: '%messaging.google_sender_id%'
      $useAmazonSes: '%messaging.use_amazon_ses%'
      $usePrecedenceHeader: '%messaging.use_precedence_header%'
      $devVersion: '%app.dev_version%'
      $devEmail: '%app.dev_email%'
